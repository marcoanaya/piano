{"version":3,"sources":["components/audio/constants.ts","components/audio/Sampler.ts","components/audio/AudioPlayer.ts","components/piano/Key.ts","components/piano/Piano.tsx","App.tsx","index.tsx"],"names":["samples","instruments","Object","keys","Sampler","onload","selectedInstruments","instrument","baseUrl","process","urls","minBy","Math","floor","length","entries","reduce","acc","i","key","url","this","Tone","toDestination","AudioPlayer","setAudioPlayer","synth","triggerAttack","toString","triggerRelease","notes","Key","val","note","octave","shortcut","match","Number","indexOf","a","b","j","start","end","startKey","endKey","compare","getNextKey","push","accidentalShortcuts","naturalShortcuts","k","naturalCount","shortcutToKeyMap","Map","getType","set","Piano","useState","audioPlayer","notesPlaying","setNotesPlaying","setShortcutToKeyMap","setInstrument","useEffect","getKeysInBetween","addShortcuts","OrderedMap","map","onDownHandler","onUpHandler","handler","e","repeat","get","onDownListener","onUpListener","window","addEventListener","removeEventListener","prev","startNote","stopNote","onChange","target","value","defaultValue","className","Array","from","isPlaying","onMouseDown","onMouseUp","onMouseLeave","renderKey","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oQAAaA,EAAU,CACrB,gBAAiB,CACf,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAGR,QAAW,CACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAIV,MAAS,CACL,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,UAIV,SAAY,CACR,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,UAIV,WAAc,CACV,GAAM,SACN,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,GAAM,SACN,MAAO,UACP,MAAO,UACP,GAAM,SACN,MAAO,UACP,GAAM,UAIV,MAAS,CACL,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAIV,cAAe,CACX,GAAM,SACN,GAAM,SACN,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAIV,kBAAmB,CACf,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAKV,kBAAmB,CACf,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,WAGX,eAAgB,CACZ,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAIV,UAAa,CACT,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,WAGX,KAAQ,CACJ,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAIV,MAAS,CACL,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,UAGV,MAAS,CACL,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,MAAO,UACP,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,SACN,GAAM,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","file":"static/js/main.59c0a4aa.chunk.js","sourcesContent":["export const samples = {\n  \"bass-electric\": {\n    \"A#2\": \"As2.mp3\",\n    \"A#3\": \"As3.mp3\",\n    \"A#4\": \"As4.mp3\",\n    \"A#5\": \"As5.mp3\",\n    \"C#2\": \"Cs2.mp3\",\n    \"C#3\": \"Cs3.mp3\",\n    \"C#4\": \"Cs4.mp3\",\n    \"C#5\": \"Cs5.mp3\",\n    \"E2\": \"E2.mp3\",\n    \"E3\": \"E3.mp3\",\n    \"E4\": \"E4.mp3\",\n    \"E5\": \"E5.mp3\",\n    \"G2\": \"G2.mp3\",\n    \"G3\": \"G3.mp3\",\n    \"G4\": \"G4.mp3\",\n    \"G5\": \"G5.mp3\"\n  },\n\n  \"bassoon\": {\n      \"A3\": \"A3.mp3\",\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"G1\": \"G1.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"A1\": \"A1.mp3\",\n      \"A2\": \"A2.mp3\"\n\n  },\n\n  \"cello\": {\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#3\": \"Gs3.mp3\",\n      \"G#4\": \"Gs4.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"A#4\": \"As4.mp3\",\n      \"B2\": \"B2.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"B4\": \"B4.mp3\",\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"E2\": \"E2.mp3\"\n\n  },\n\n  \"clarinet\": {\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D5\": \"D5.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F#5\": \"Fs5.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"A#4\": \"As4.mp3\",\n      \"D2\": \"D2.mp3\"\n\n  },\n\n  \"contrabass\": {\n      \"C1\": \"C1.mp3\",\n      \"C#2\": \"Cs2.mp3\",\n      \"D1\": \"D1.mp3\",\n      \"E1\": \"E1.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"F#0\": \"Fs0.mp3\",\n      \"F#1\": \"Fs1.mp3\",\n      \"G0\": \"G0.mp3\",\n      \"G#1\": \"Gs1.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"A1\": \"A1.mp3\",\n      \"A#0\": \"As0.mp3\",\n      \"B2\": \"B2.mp3\"\n\n  },\n\n  \"flute\": {\n      \"A5\": \"A5.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"E5\": \"E5.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\"\n\n  },\n\n  \"french-horn\": {\n      \"D2\": \"D2.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"G1\": \"G1.mp3\",\n      \"A0\": \"A0.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"C1\": \"C1.mp3\",\n      \"C3\": \"C3.mp3\"\n\n  },\n\n  \"guitar-acoustic\": {\n      \"F3\": \"F3.mp3\",\n      \"F#1\": \"Fs1.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"G1\": \"G1.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G#1\": \"Gs1.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#3\": \"Gs3.mp3\",\n      \"A1\": \"A1.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A#1\": \"As1.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"B1\": \"B1.mp3\",\n      \"B2\": \"B2.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C#2\": \"Cs2.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"D1\": \"D1.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"E1\": \"E1.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"F1\": \"F1.mp3\",\n      \"F2\": \"F2.mp3\"\n\n  },\n\n\n  \"guitar-electric\": {\n      \"D#3\": \"Ds3.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"D#5\": \"Ds5.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"F#5\": \"Fs5.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A5\": \"A5.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\",\n      \"C#2\": \"Cs2.mp3\"\n  },\n\n  \"guitar-nylon\": {\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"F#5\": \"Fs5.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G5\": \"G3.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#4\": \"Gs4.mp3\",\n      \"G#5\": \"Gs5.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A5\": \"A5.mp3\",\n      \"A#5\": \"As5.mp3\",\n      \"B1\": \"B1.mp3\",\n      \"B2\": \"B2.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"B4\": \"B4.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"C#5\": \"Cs5.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D5\": \"D5.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"E5\": \"E5.mp3\"\n  },\n\n\n  \"harmonium\": {\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C#2\": \"Cs2.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"C#5\": \"Cs5.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D5\": \"D5.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#3\": \"Gs3.mp3\",\n      \"G#4\": \"Gs4.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"A#4\": \"As4.mp3\"\n  },\n\n  \"harp\": {\n      \"C5\": \"C5.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D6\": \"D6.mp3\",\n      \"D7\": \"D7.mp3\",\n      \"E1\": \"E1.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E5\": \"E5.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F6\": \"F6.mp3\",\n      \"F7\": \"F7.mp3\",\n      \"G1\": \"G1.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G5\": \"G5.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A6\": \"A6.mp3\",\n      \"B1\": \"B1.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"B5\": \"B5.mp3\",\n      \"B6\": \"B6.mp3\",\n      \"C3\": \"C3.mp3\"\n\n  },\n\n  \"organ\": {\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"D#5\": \"Ds5.mp3\",\n      \"F#1\": \"Fs1.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"F#5\": \"Fs5.mp3\",\n      \"A1\": \"A1.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A5\": \"A5.mp3\",\n      \"C1\": \"C1.mp3\",\n      \"C2\": \"C2.mp3\"\n  },\n\n  \"piano\": {\n      \"A0\": \"A0.mp3\",\n      \"A1\": \"A1.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A5\": \"A5.mp3\",\n      \"A6\": \"A6.mp3\",\n      \"A#0\": \"As0.mp3\",\n      \"A#1\": \"As1.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"A#4\": \"As4.mp3\",\n      \"A#5\": \"As5.mp3\",\n      \"A#6\": \"As6.mp3\",\n      \"B0\": \"B0.mp3\",\n      \"B1\": \"B1.mp3\",\n      \"B2\": \"B2.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"B4\": \"B4.mp3\",\n      \"B5\": \"B5.mp3\",\n      \"B6\": \"B6.mp3\",\n      \"C0\": \"C0.mp3\",\n      \"C1\": \"C1.mp3\",\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\",\n      \"C7\": \"C7.mp3\",\n      \"C#0\": \"Cs0.mp3\",\n      \"C#1\": \"Cs1.mp3\",\n      \"C#2\": \"Cs2.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"C#5\": \"Cs5.mp3\",\n      \"C#6\": \"Cs6.mp3\",\n      \"D0\": \"D0.mp3\",\n      \"D1\": \"D1.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D5\": \"D5.mp3\",\n      \"D6\": \"D6.mp3\",\n      \"D#0\": \"Ds0.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"D#4\": \"Ds4.mp3\",\n      \"D#5\": \"Ds5.mp3\",\n      \"D#6\": \"Ds6.mp3\",\n      \"E0\": \"E0.mp3\",\n      \"E1\": \"E1.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"E5\": \"E5.mp3\",\n      \"E6\": \"E6.mp3\",\n      \"F0\": \"F0.mp3\",\n      \"F1\": \"F1.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F5\": \"F5.mp3\",\n      \"F6\": \"F6.mp3\",\n      \"F#0\": \"Fs0.mp3\",\n      \"F#1\": \"Fs1.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"F#5\": \"Fs5.mp3\",\n      \"F#6\": \"Fs6.mp3\",\n      \"G0\": \"G0.mp3\",\n      \"G1\": \"G1.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G5\": \"G5.mp3\",\n      \"G6\": \"G6.mp3\",\n      \"G#0\": \"Gs0.mp3\",\n      \"G#1\": \"Gs1.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#3\": \"Gs3.mp3\",\n      \"G#4\": \"Gs4.mp3\",\n      \"G#5\": \"Gs5.mp3\",\n      \"G#6\": \"Gs6.mp3\"\n  },\n\n  \"saxophone\": {\n      \"D#4\": \"Ds4.mp3\",\n      \"E2\": \"E2.mp3\",\n      \"E3\": \"E3.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"F#2\": \"Fs2.mp3\",\n      \"F#3\": \"Fs3.mp3\",\n      \"F#4\": \"Fs4.mp3\",\n      \"G2\": \"G2.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"G#3\": \"Gs3.mp3\",\n      \"G#4\": \"Gs4.mp3\",\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"B2\": \"B2.mp3\",\n      \"B3\": \"B3.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C#2\": \"Cs2.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"C#4\": \"Cs4.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\"\n\n  },\n\n  \"trombone\": {\n      \"A#2\": \"As2.mp3\",\n      \"C2\": \"C2.mp3\",\n      \"C3\": \"C3.mp3\",\n      \"C#1\": \"Cs1.mp3\",\n      \"C#3\": \"Cs3.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"D#2\": \"Ds2.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"F1\": \"F1.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"G#1\": \"Gs1.mp3\",\n      \"G#2\": \"Gs2.mp3\",\n      \"A#0\": \"As0.mp3\",\n      \"A#1\": \"As1.mp3\"\n\n  },\n\n  \"trumpet\": {\n      \"C5\": \"C5.mp3\",\n      \"D4\": \"D4.mp3\",\n      \"D#3\": \"Ds3.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"F3\": \"F3.mp3\",\n      \"F4\": \"F4.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"A2\": \"A2.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A#3\": \"As3.mp3\",\n      \"C3\": \"C3.mp3\"\n\n  },\n\n  \"tuba\": {\n      \"A#1\": \"As1.mp3\",\n      \"A#2\": \"As2.mp3\",\n      \"D2\": \"D2.mp3\",\n      \"D3\": \"D3.mp3\",\n      \"D#1\": \"Ds1.mp3\",\n      \"F0\": \"F0.mp3\",\n      \"F1\": \"F1.mp3\",\n      \"F2\": \"F2.mp3\",\n      \"A#0\": \"As0.mp3\"\n\n  },\n\n  \"violin\": {\n      \"A3\": \"A3.mp3\",\n      \"A4\": \"A4.mp3\",\n      \"A5\": \"A5.mp3\",\n      \"A6\": \"A6.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\",\n      \"C7\": \"C7.mp3\",\n      \"E4\": \"E4.mp3\",\n      \"E5\": \"E5.mp3\",\n      \"E6\": \"E6.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G5\": \"G5.mp3\",\n      \"G6\": \"G6.mp3\"\n      \n  },\n\n  \"xylophone\": {\n      \"C7\": \"C7.mp3\",\n      \"G3\": \"G3.mp3\",\n      \"G4\": \"G4.mp3\",\n      \"G5\": \"G5.mp3\",\n      \"G6\": \"G6.mp3\",\n      \"C4\": \"C4.mp3\",\n      \"C5\": \"C5.mp3\",\n      \"C6\": \"C6.mp3\"\n\n  }\n}\nexport declare type Instrument = keyof typeof samples;\n\nexport const instruments = Object.keys(samples) as Instrument[];\n\n","import * as Tone from \"tone\";\nimport { samples, instruments, Instrument } from \"./constants\";\n\nconst MINIFY = true;\n\nexport class Sampler {\n  [k: string]: Tone.Sampler;\n\n  constructor(onload: () => void, selectedInstruments: Instrument[] = instruments) {\n\n    for (const instrument of selectedInstruments) {\n      const baseUrl = `${process.env.PUBLIC_URL}/samples/${instrument}/`;\n      let urls: {[k:string]: string} = samples[instrument];\n\n      if (MINIFY) {\n        const minBy = Math.floor(Object.keys(urls).length / 15) || 1;\n\n        urls = Object.entries(urls).reduce((acc, [key, url], i) => {\n            if (i % minBy === 0) acc[key] = url;\n            return acc;\n        }, {} as {[k:string]: string});\n      }\n      this[instrument] = new Tone.Sampler({\n        urls, \n        onload, \n        baseUrl,\n      }).toDestination();\n    }\n  }\n}\n","import React from \"react\";\nimport { Key } from \"../piano/Key\";\nimport { Instrument } from \"./constants\";\nimport { Sampler } from \"./Sampler\";\n\nexport default class AudioPlayer {\n  synth: Sampler;\n\n  constructor(setAudioPlayer: React.Dispatch<React.SetStateAction<AudioPlayer | null>>) {\n    const onload = () => setAudioPlayer(this);\n    this.synth = new Sampler(onload);\n  }\n\n  startNote(key: Key, instrument: Instrument) {\n    this.synth[instrument].triggerAttack(key.toString());\n  }\n\n  stopNote(key: Key, instrument: Instrument) {\n    this.synth[instrument].triggerRelease(key.toString());\n  }\n}\n\n","const notes = [\"C\", \"C#\", \"D\", \"D#\", \"E\" , \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"] as const;\n\nexport class Key {\n  note: Key.Note;\n  octave: number;\n  shortcut?: string;\n  \n  constructor(val: Key.Str) {\n    const [, note, octave] = val.match(/([A-G][#]?)([1-9])/)!\n    this.note = note as Key.Note;\n    this.octave = Number(octave);\n  }\n\n  /* Gets the 'type' of the key, i.e. in a piano black (accidental) or white (natural) */\n  getType(): Key.Type {\n    return (this.note.length > 1)? \"accidental\" : \"natural\";\n  }\n\n  /* Gets the next (higher) key */\n  getNextKey(): Key {\n    const i = (notes.indexOf(this.note) + 1) % notes.length;\n    return new Key(`${notes[i]}${this.octave + Number(i === 0)}`)\n  }\n\n  /* Converts key to string */\n  toString(): Key.Str {\n    return `${this.note}${this.octave}`;\n  }\n\n  /* Compares key a to key b. Returns:\n   *   -1 if a < b\n   *    0 if a = b\n   *    1 if a > b\n   */\n  static compare(a: Key, b: Key): number {\n    const i = notes.indexOf(a.note);\n    const j = notes.indexOf(b.note);\n    // if both octave and note are equal\n    if (a.octave === b.octave && i === j) return 0;\n    // if octave of a is less or the note is less\n    else if (a.octave < b.octave || (a.octave === b.octave && i < j)) return -1;\n    // otherwise a is greater\n    else return 1\n  }\n\n  /* Gets all the keys from start to end (both inclusive) */\n  static getKeysInBetween(\n    start: Key.Str,\n    end: Key.Str,\n  ): Key[] {\n\n    let [startKey, endKey] = [new Key(start), new Key(end)]\n    \n    if (Key.compare(startKey, endKey) > 0)\n      return []\n\n    const keys = [startKey];\n    while (Key.compare(startKey, endKey)) {\n      startKey = startKey.getNextKey();\n      keys.push(startKey);\n    }\n\n    return keys;\n  }\n\n  static addShortcuts(keys: Key[]) {\n    const accidentalShortcuts = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"-\", \"=\", \"a\",\"s\",\"d\",\"f\",\"g\",\"h\",\"j\",\"k\",\"l\",\";\", \"'\", /*'!',*/ '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ':']\n    const naturalShortcuts = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']', 'z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', '/', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '{', '}', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', '?']\n    let [i, j, k] = [0, 0, 0];\n    let naturalCount = 0;\n    const shortcutToKeyMap = new Map();\n    while (i < accidentalShortcuts.length && j < naturalShortcuts.length && k < keys.length) {\n      const key = keys[k];\n      if (key.getType() === \"accidental\") {\n        if (naturalCount !== 2 && j <= i) {\n          key.shortcut = accidentalShortcuts[i]\n          shortcutToKeyMap.set(accidentalShortcuts[i], key);\n          k++;\n        }\n        i++;\n        naturalCount=0;\n      } else {\n        key.shortcut = naturalShortcuts[j];\n        shortcutToKeyMap.set(naturalShortcuts[j], key);\n        k++;\n        j++;\n        naturalCount++;\n      }\n    }\n    return shortcutToKeyMap;\n  }\n}\n\nexport declare namespace Key {\n  export type Note = typeof notes[number];\n  export type Type = (\"accidental\" | \"natural\");\n  export type Str = `${Key.Note}${number}`;\n}\n","import { useEffect } from 'react';\nimport { useState } from 'react';\nimport { OrderedMap } from 'immutable';\nimport AudioPlayer from '../audio/AudioPlayer';\nimport { Key } from './Key';\nimport { instruments, Instrument } from \"../audio/constants\";\nimport './piano.css';\n\n\nexport default function Piano() {\n  const [audioPlayer, setAudioPlayer] = useState<AudioPlayer | null>(null);\n  const [notesPlaying, setNotesPlaying] = useState<OrderedMap<Key, boolean> | null>(null);\n  const [shortcutToKeyMap, setShortcutToKeyMap] = useState<Map<string, Key> | null>(null);\n  const [instrument, setInstrument] = useState<Instrument>(\"piano\");\n\n  useEffect(() => {\n    const keys = Key.getKeysInBetween(\"C1\", \"B6\")\n    setShortcutToKeyMap(Key.addShortcuts(keys));\n    setNotesPlaying(OrderedMap(keys.map((k) => [k, false])));\n\n    new AudioPlayer(setAudioPlayer);    \n  }, [])\n\n  useEffect(() => {\n    const listener = (handler: (key: Key) => void) => ((e: KeyboardEvent) => {\n      if (!e.repeat){\n        const key = shortcutToKeyMap?.get(e.key);\n        if (key) handler(key);\n      }\n    });\n    const [onDownListener, onUpListener] = [onDownHandler, onUpHandler].map(listener)\n    window.addEventListener(\"keydown\", onDownListener);\n    window.addEventListener(\"keyup\", onUpListener);\n    return () => {\n      window.removeEventListener(\"keydown\", onDownListener);\n      window.removeEventListener(\"keyup\", onUpListener);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [shortcutToKeyMap, audioPlayer, instrument])\n  \n  const onDownHandler = (key: Key) => {\n    setNotesPlaying((prev) => prev!.set(key, true));\n    audioPlayer?.startNote(key, instrument);\n  }\n\n  const onUpHandler = (key: Key) => {\n    setNotesPlaying((prev) => prev!.set(key, false));\n    audioPlayer?.stopNote(key, instrument);\n  }\n\n  const renderKey = (key: Key, isPlaying: boolean) => {\n    return (\n      <div \n        className={`piano-${key.getType()}-key-wrapper`} \n        key={key.toString()}\n      >\n        <button \n          className={`piano-${key.getType()}-key ${isPlaying && \"active\"}`}\n          onMouseDown={() => onDownHandler(key)}\n          onMouseUp={() => onUpHandler(key)}\n          onMouseLeave={() => onUpHandler(key)}\n        >\n          <span className=\"piano-text\">{isPlaying && key.toString()}<br/>{key.shortcut}</span>\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <select \n        onChange={(e) => setInstrument(e.target.value as Instrument)}\n        defaultValue={instrument}\n        className=\"instrument-chooser\"\n      >\n        {instruments.map((instrument, i) => (\n          <option \n            value={instrument}\n            key={i}\n          >{instrument}</option>\n        ))}\n      </select>\n    <div className=\"piano-container\">\n      {\n        (audioPlayer && notesPlaying) \n        ? \n          Array.from(notesPlaying, ([key, isPlaying]) => renderKey(key, isPlaying))\n        \n        : \"LOADING\"\n      }\n    </div></div>\n  )\n}\n","import './App.css';\nimport Piano from './components/piano/Piano';\n\nexport default function App() {\n  return (\n    <div className=\"app-container\">\n      <Piano/>\n    </div>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}